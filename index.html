<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üçΩÔ∏è Multi-User Meal Planner</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 2rem;
      color: #333;
    }
    h1, h2, h3 {
      text-align: center;
      color: #111;
    }
    form, .meal-section {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      max-width: 500px;
      margin: 1rem auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 0.4rem;
    }
    .btn-container {
      text-align: center;
      margin-top: 1rem;
    }
    .btn {
      background: #0078d4;
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      margin: 0.3rem;
      cursor: pointer;
      font-size: 0.95rem;
    }
    .btn:hover {
      background: #005fa3;
    }
    #profileDisplay {
      background: #fff;
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .profiles-container {
      margin-top: 1rem;
      background: #f9fafb;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    .profile-card {
      background: white;
      margin: 0.5rem 0;
      padding: 0.7rem;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 1px 4px rgba(0,0,0,0.05);
    }
    .profile-card button {
      margin-left: 6px;
      padding: 4px 8px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .profile-card button:hover {
      opacity: 0.8;
    }
    .load-btn {
      background: #0078d4;
      color: white;
    }
    .delete-btn {
      background: #e81123;
      color: white;
    }
  </style>
</head>
<body>
  <h1>ü•ó Multi-User Meal Planner</h1>

  <!-- Profile form -->
  <form id="mealForm">
    <label for="name">Name:</label>
    <input type="text" id="name" placeholder="Enter name" required />

    <label for="age">Age:</label>
    <input type="number" id="age" placeholder="Enter age" />

    <label for="weight">Weight (kg):</label>
    <input type="number" id="weight" placeholder="Enter weight" />

    <label for="goal">Fitness Goal:</label>
    <select id="goal">
      <option value="fat loss">Fat Loss</option>
      <option value="muscle gain">Muscle Gain</option>
      <option value="maintenance">Maintenance</option>
    </select>

    <div class="btn-container">
      <button type="button" class="btn" onclick="saveProfile()">üíæ Save Profile</button>
      <button type="button" class="btn" onclick="resetForm()">üîÑ Reset Form</button>
      <button type="button" class="btn" onclick="showProfilesList()">üìã View Saved Profiles</button>
    </div>
  </form>

  <!-- Meal Plan Section -->
  <div class="meal-section" id="mealSection" style="display:none;">
    <h3>üç¥ Meal Plan for <span id="mealUser"></span></h3>

    <label for="breakfast">Breakfast:</label>
    <textarea id="breakfast" rows="2" placeholder="E.g. 2 scoops Herbalife shake + oats"></textarea>

    <label for="lunch">Lunch:</label>
    <textarea id="lunch" rows="2" placeholder="E.g. Chicken breast + veggies"></textarea>

    <label for="dinner">Dinner:</label>
    <textarea id="dinner" rows="2" placeholder="E.g. Shake + fruits"></textarea>

    <label for="snacks">Snacks:</label>
    <textarea id="snacks" rows="2" placeholder="E.g. Eggs, almonds, or yogurt"></textarea>

    <div class="btn-container">
      <button class="btn" onclick="saveMealPlan()">ü•ó Save Meal Plan</button>
    </div>
  </div>

  <div id="profileDisplay"></div>
  <div id="savedProfiles" class="profiles-container"></div>

  <script>
    let profile = null;

    // --- Save or update a profile ---
    function saveProfile() {
      const name = document.getElementById("name").value.trim();
      const age = document.getElementById("age").value;
      const weight = document.getElementById("weight").value;
      const goal = document.getElementById("goal").value;

      if (!name) {
        alert("Please enter a name.");
        return;
      }

      const newProfile = { name, age, weight, goal, meals: profile?.meals || {} };
      let profiles = JSON.parse(localStorage.getItem("mealPlannerProfiles") || "[]");
      const index = profiles.findIndex(p => p.name.toLowerCase() === name.toLowerCase());

      if (index >= 0) profiles[index] = newProfile;
      else profiles.push(newProfile);

      localStorage.setItem("mealPlannerProfiles", JSON.stringify(profiles));
      profile = newProfile;
      showProfile();
      showMealSection();
      alert(`‚úÖ Profile for ${name} saved!`);
    }

    // --- Show saved profiles ---
    function showProfilesList() {
      const profiles = JSON.parse(localStorage.getItem("mealPlannerProfiles") || "[]");
      const container = document.getElementById("savedProfiles");

      if (profiles.length === 0) {
        container.innerHTML = "<p>No saved profiles yet.</p>";
        return;
      }

      const list = profiles.map(
        (p, i) => `
          <div class="profile-card">
            <div>
              <strong>${p.name}</strong> ‚Äî ${p.age || '?'} yrs, ${p.weight || '?'} kg, Goal: ${p.goal || '-'}
            </div>
            <div>
              <button class="load-btn" onclick="loadProfile(${i})">üìÇ Load</button>
              <button class="delete-btn" onclick="deleteProfile(${i})">üóë</button>
            </div>
          </div>`
      ).join("");

      container.innerHTML = `<h3>Saved Profiles</h3>${list}`;
    }

    // --- Load profile ---
    function loadProfile(index) {
      const profiles = JSON.parse(localStorage.getItem("mealPlannerProfiles") || "[]");
      if (profiles[index]) {
        profile = profiles[index];
        showProfile();
        showMealSection();
        alert(`üìÇ Loaded profile for ${profile.name}!`);
      }
    }

    // --- Delete profile ---
    function deleteProfile(index) {
      if (!confirm("Are you sure you want to delete this profile?")) return;
      let profiles = JSON.parse(localStorage.getItem("mealPlannerProfiles") || "[]");
      profiles.splice(index, 1);
      localStorage.setItem("mealPlannerProfiles", JSON.stringify(profiles));
      showProfilesList();
    }

    // --- Reset form ---
    function resetForm() {
      document.getElementById("mealForm").reset();
      document.getElementById("profileDisplay").innerHTML = "";
      document.getElementById("mealSection").style.display = "none";
    }

    // --- Display profile ---
    function showProfile() {
      document.getElementById("profileDisplay").innerHTML = `
        <h3>${profile.name}</h3>
        <p>Age: ${profile.age || '-'}</p>
        <p>Weight: ${profile.weight || '-'} kg</p>
        <p>Goal: ${profile.goal || '-'}</p>
      `;
    }

    // --- Show meal section with current meals ---
    function showMealSection() {
      const section = document.getElementById("mealSection");
      section.style.display = "block";
      document.getElementById("mealUser").innerText = profile.name;
      document.getElementById("breakfast").value = profile.meals?.breakfast || "";
      document.getElementById("lunch").value = profile.meals?.lunch || "";
      document.getElementById("dinner").value = profile.meals?.dinner || "";
      document.getElementById("snacks").value = profile.meals?.snacks || "";
    }

    // --- Save meal plan for current profile ---
    function saveMealPlan() {
      if (!profile) {
        alert("Please load or create a profile first.");
        return;
      }

      const meals = {
        breakfast: document.getElementById("breakfast").value,
        lunch: document.getElementById("lunch").value,
        dinner: document.getElementById("dinner").value,
        snacks: document.getElementById("snacks").value
      };

      profile.meals = meals;

      let profiles = JSON.parse(localStorage.getItem("mealPlannerProfiles") || "[]");
      const index = profiles.findIndex(p => p.name.toLowerCase() === profile.name.toLowerCase());
      if (index >= 0) profiles[index] = profile;
      localStorage.setItem("mealPlannerProfiles", JSON.stringify(profiles));

      alert(`ü•ó Meal plan saved for ${profile.name}!`);
    }

    // --- Auto-load profiles on startup ---
    window.onload = showProfilesList;
  </script>
</body>
</html>
